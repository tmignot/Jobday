<template name="resultatSearch">
	<div id="AdvertsList" class="">
		{{#each adverts searchSettings}}
			{{>advertCard this}}
		{{/each}}
	</div>
</template>

<template name='advertCard'>
	<div class='col-xs-12 section advertCard'>
		<div class='col-xs-2'>
			{{#with category this.category}}
			<img src='{{icon}}' width='100%'>
			{{/with}}
		</div>
		<div class='col-xs-6 col-md-7'>
			<h4 class='advertCard-title' data-which='{{_id}}'>{{title}}</h4>
			<h4><small>{{getCat}}</small></h4>
		</div>
		<div class='pull-right col-xs-4 col-md-3'>
			<div><i class='material-icons'>euro_symbol</i>{{budget}}</div>
			<div><i class='material-icons'>place</i>{{address.zipcode}} {{address.city}}</div>
		</div>
	</div>
</template>

<template name="searchMission">
	<div style="margin-top:100px;">
		<button  id="btnSearchJobParticulier" style ="background-color:#63c2c7;height: 25px;padding: 0px; margin-top: 2px;margin-bottom: 2px;" class="btn btn-primary glyphicon glyphicon-search" type="button" > Job entre Particulier  </button>
		<button  id="btnSearchJobProfessionel" style ="background-color:#63c2c7;height: 25px;padding: 0px; margin-top: 2px;margin-bottom: 2px;" class="btn btn-primary glyphicon glyphicon-search" type="button" > Job Professionnel </button>
		<button  id="btnSearchJobAll" style ="background-color:#63c2c7;height: 25px;padding: 0px; margin-top: 2px;margin-bottom: 2px;" class="btn btn-primary glyphicon glyphicon-search" type="button" > Tous les Jobs </button>
		<button  id="btnSearchJobOnline" style ="background-color:#63c2c7;height: 25px;padding: 0px; margin-top: 2px;margin-bottom: 2px;" class="btn btn-primary glyphicon glyphicon-search" type="button" > Job Connecté </button>
	</div>	
	<div class="input-group input-group-lg" style="">
		<span style="text-align: left;" class="input-group-addon" id="sizing-addon1">Catégorie </span>
		<select autocomplete="off" id="collectionIdSelect" class="form-control">
			<option value="0">Toutes Catégories</option>
			<option value="1">Hôtellerie & Restauration</option>
			<option value="2">Commerce & Vente</option>
			<option value="3">Service à la personne	</option>
			<option value="4">Web & Création	</option>
			<option value="5">Evénementiel	</option>
			<option value="6">Transport & Logistique	</option>
			<option value="7">Service administratif </option>
			<option value="8">Rédaction & Traduction</option>
			<option value="9">Cours</option>
			<option value="10">Tourisme	</option>
			<option value="11">Santé</option>
			<option value="12">Maison & Jardin</option>
		</select>
	</div>
	<div class="input-group input-group-lg" style="">
		<span style="text-align: left;" class="input-group-addon" id="sizing-addon1">Sous Catégorie </span>
		<select autocomplete="off" id="collectionIdSelect" class="form-control">
			<option value="0">Maison & Jardin</option>
			<option value="0">Hôtellerie & Restauration</option>
			<option value="0">Commerce & Vente</option>
			<option value="0">Web & Création	</option>
			<option value="0">Evénementiel	</option>
			<option value="0">Service à la personne	</option>
			<option value="0">Transport & Logistique	</option>
			<option value="0">Service administratif </option>
			<option value="0">Rédaction & Traduction</option>
			<option value="0">Cours</option>
			<option value="0">Tourisme	</option>
			<option value="0">Santé</option>
		</select>
	</div>
	<input type="text"  class="form-control" placeholder="Votre Besoin ?" id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
	{{> inputAutocomplete settings=settings class="form-control" id="localisation" placeholder="Localisation ?" aria-describedby="sizing-addon1"}}
	{{> inputAutocomplete settings=settings class="form-control" id="localisation" placeholder="Mots-clé" aria-describedby="sizing-addon1"}}
	<button  id="btnSearch" style ="background-color:#63c2c7;height: 55px;padding: 0px; width: 100%;margin-top: 2px;margin-bottom: 2px;" class="btn btn-primary glyphicon glyphicon-search" type="button" > Rechercher </button>
	<div>
		Filtrer Par :
		<div>
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			Date Publication Récente (Par défaut)
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			Prix croissant
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			Prix décroissant
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			Urgence
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			Distance
			<input type="radio"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
			<input type="date"  id="besoin" aria-describedby="sizing-addon1" style="margin-top: 2px;margin-bottom: 2px;">
		</div>
	</div>
	<div class="ligneTableau" style="display: flex;" >
		<div class="celluleTableau" style="width: 725px;">
			{{> resultatSearch}}
		</div>
		<div class="celluleTableau">
			{{> mapsMission}}
		</div>
	</div>
</template>

<template name="mapsMission">
	<div id="map" style="height:350px;width:375px;"></div>
	<script>
		var map;
		function initMap() {
			var geocoder = new google.maps.Geocoder();
			var address = "13 boulevard de l'hôpital Stell, 92500 Rueil-MalMaison"//"new york";
			geocoder.geocode( { 'address': address}, function(results, status) {
				if (status == google.maps.GeocoderStatus.OK) {
					var latitude = results[0].geometry.location.lat();
					var longitude = results[0].geometry.location.lng();
					map = new google.maps.Map(document.getElementById('map'), {
						center: {lat: latitude, lng: longitude},
						zoom: 12
					});
					var location = { lat: latitude, lng: longitude }; 
					var contentString = '<div id="content">'+
						'<div id="siteNotice">'+
						'</div>'+
						'<h1 id="firstHeading" class="firstHeading">Titre Mission</h1>'+
						'<div id="bodyContent">'+
						'<p><b>Roman</b>, cherche un bon plan ;)' +
						'Vive Jobday.</p>'+
						'<p>Attribution: Jobday, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
						'Détails Annonce</a> '+
						'</p>'+
						'</div>'+
						'</div>';
					var infowindow = new google.maps.InfoWindow({
						content: contentString
					});
					var marker = new google.maps.Marker({
						position: location,
						map: map,
						title: 'Job Information'
					});
					marker.addListener('click', function() {
						infowindow.open(map, marker);
					});
				}
			}); 
			address = "1 boulevard de l'hôpital Stell, 92500 Rueil-MalMaison";
			geocoder.geocode( { 'address': address}, function(results, status) {
				if (status == google.maps.GeocoderStatus.OK) {
					var latitude = results[0].geometry.location.lat();
					var longitude = results[0].geometry.location.lng();
					var location = { lat: latitude, lng: longitude }; 
					var contentString = '<div id="content">'+
						'<div id="siteNotice">'+
						'</div>'+
						'<h1 id="firstHeading" class="firstHeading">Titre Mission2</h1>'+
						'<div id="bodyContent">'+
						'<p><b>Roman</b>, cherche un bon plan ;)' +
						'Vive Jobday.</p>'+
						'<p>Attribution: Jobday, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
						'Détails Annonce</a> '+
						'</p>'+
						'</div>'+
						'</div>';
					var infowindow = new google.maps.InfoWindow({
						content: contentString
					});
					var marker = new google.maps.Marker({
						position: location,
						map: map,
						title: 'Job Information'
					});
					marker.addListener('click', function() {
						infowindow.open(map, marker);
					});
				}
			}); 
		}
	</script>
</template>
